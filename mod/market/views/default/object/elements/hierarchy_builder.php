<?php/****** D R A F T ******/$vars['name'] = preg_replace('/[^a-z0-9\-]/i', '-', $vars['name']);$headers = elgg_extract('show_section_headers', $vars, false);$level = elgg_extract('level', $vars, 'root');$class = "elgg-menu elgg-menu-{$vars['name']}";if (isset($vars['class'])) {	$class .= " {$vars['class']}";}Switch ($level){	case 'root':		/*Categories*/		$menu = elgg_get_entities(['subytpe'=>'hjcategory',				                   'wheres' =>'container_guid = 1']);				foreach ($menu as $section => $menu_items) {		$hierarchy[$section] = elgg_view('object/elements/hierarchy_builder', 					['level'=>'section',					 'items' => $menu_items,					 'class' => "$class elgg-menu-{$vars['name']}-$section",					 'section' => $section,					 'name' => $vars['name'],					 'show_section_headers' => $headers]);		}		break;	case 'section':		/*Section*/		$headers = elgg_extract('show_section_headers', $vars, false);		$class = elgg_extract('class', $vars, '');		$item_class = elgg_extract('item_class', $vars, '');		$id = elgg_extract('id', $vars);		$collapse = elgg_extract('collapse', $vars, true);		$show_toggle = elgg_extract('show_toggle', $vars, true);				echo "<ul id=\"$id\" class=\"$class\">";		foreach ($vars['items'] as $menu_item) {			echo elgg_view('object/elements/hierarchy_builder', 				['level'=>'item',				'item' => $menu_item,				'item_class' => $item_class,				'collapse' => $collapse,			    'show_toggle' => $show_toggle,]);		}		echo '</ul>';		break;	case 'item':		/* item */		$item = elgg_extract('item', $vars);		$collapse = elgg_extract('collapse', $vars, false);				$item_class = ($collapse) ? 'elgg-menu-closed' : 'elgg-menu-open';				$children = $item->getChildren();		if ($children) {			$item_class = "$item_class elgg-menu-parent";			$toggle = '<span class="elgg-child-menu-toggle"><span class="collapse ">[-]</span><span class="expand">[+]</span></span>';		} else {			$item_class = "$item_class elgg-menu-nochildren";		}				$item_class = "$item_class {$item->getItemClass()}";		if ($item->getSelected()) {			$item_class = "$item_class elgg-state-selected";		}		if (isset($vars['item_class']) && $vars['item_class']) {			$item_class .= ' ' . $vars['item_class'];		}		if ($children) {			echo elgg_view('object/elements/hierarchy_builder', array(				'level'=>'section',				'items' => $children,				'class' => 'elgg-menu elgg-child-menu',				'collapse' => true			));		}		break;}