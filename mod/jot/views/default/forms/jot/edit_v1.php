<!--Form jot\views\default\forms\jot\edit.php --><br><?php/** * Elgg jot Plugin * @package jot */// Get plugin settings$allowhtml = elgg_get_plugin_setting('jot_allowhtml', 'jot');$numchars = elgg_get_plugin_setting('jot_numchars', 'jot');if($numchars == ''){	$numchars = '250';}$jot   = $vars['jot'];$title = $vars['title'];$body = $vars['body'];$tags = $vars['tags'];$aspect = $vars['aspect'];$access_id = $vars['access_id'];$action = elgg_extract('action', $vars, '');$view = elgg_extract('view', $vars, '');$perspective = elgg_extract('perspective', $vars);$presentation = elgg_extract('presentation', $vars);if ($jot){$subtype = $jot->getSubtype();}Switch ($presentation){	case 'drop_box':				break;	default:if ($vars['entity']) {  echo elgg_view('input/hidden',array('name'=>'parent_guid','value'=>$vars['entity']->container_guid));}if (!empty($view)){	$variables = array('entity'=>$jot, 'action'=>$action);	echo elgg_view($view, $variables);}else {	//echo var_dump($relationships);	echo elgg_echo("title");	echo '&nbsp;<small><small>' . elgg_echo('jot:title:help') . '</small></small><br />';	echo elgg_view("input/text", array(					"name" => "title",					"value" => $title,					));	echo "</label></p>";			$aspects = elgg_view('jot/input/aspects_dropdown',$vars);	if (!empty($aspects)) {		echo "<p>{$aspects}</p>";	}		echo "<p><label>" . elgg_echo("jot:text") . "<br>";	if ($allowhtml != 'yes') {	echo "<small><small>" . sprintf(elgg_echo("jot:text:help"), $numchars) . "</small></small><br />";	echo <<<HTML		<textarea name='body' class='mceNoEditor' rows='8' cols='40'  		onKeyDown='textCounter(document.jotForm.body,"jot-remLen1",{$numchars}'  		onKeyUp='textCounter(document.jotForm.body,"jot-remLen1",{$numchars})'>{$body}</textarea><br />HTML;		echo "<div class='jot_characters_remaining'><span id='jot-remLen1' class='jot_charleft'>{$numchars}</span> " . elgg_echo("jot:charleft") . "</div>";	} else {		echo elgg_view("input/longtext", array("name" => "body", "value" => $body));	}	echo "</label></p>";		echo "<p><label>" . elgg_echo("jot:image") . "<br />";	echo elgg_view('jot/thumbnail', array('jotguid' => $vars['entity']->guid, 'size' => 'large', 'tu' => $vars['entity']->time_updated));	echo "<br /></label></p>";		echo "<p><label>here" . elgg_echo("jot:uploadimages") . "<br /><small><small>" . elgg_echo("jot:imagelimitation") . "</small></small><br />";	echo elgg_view("input/file",array('name' => 'upload'));	echo "</label></p>";		echo "<p><label>" . elgg_echo("jot:tags") . "&nbsp;<small><small>" . elgg_echo("jot:tags:help") . "</small></small><br />";	echo elgg_view("input/tags", array(					"name" => "tags",					"value" => $tags,					));	echo "</label></p>";		echo "<p><label>" . elgg_echo('access') . "&nbsp;<small><small>" . elgg_echo("jot:access:help") . "</small></small><br />";	echo elgg_view('input/access', array('name' => 'access_id','value' => $access_id));	echo "</label></p>";		echo "<p>";		if ($vars['entity']) {	  echo elgg_view('input/hidden',array('name'=>'guid','value'=>$vars['entity']->guid));	}	echo elgg_view('input/submit', array('name' => 'submit', 'text' => elgg_echo('jot:save'), 'value' => elgg_echo('jot:save')));}}