<?php/** * Category input field * * @uses $vars['name_override'] Override name attribute (only use if you are planning to attach custom logic to assigning categories to entities) * @uses $vars['value'] An array of category GUIDs that should be checked by default (you can leave this empty if you are passing $vars['entity'] * @uses $vars['entity'] An entity, which is being edited * @uses $vars['multiple'] If set to true, input type will be set to checkbox, otherwise radio * @uses $vars['required'] For now, this will be ignored as HTML spec does not provide clear guidelines *  * @EDIT - 2016-09-01 - SAJ * @uses $vars['root_name_override'] Sets the root name of the category tree * @uses $vars['add_leaf'] allows a user to add a new category at the lowest level *  * @EDIT - 2019-08-13 - SAJ - Forked from mod\hypeCategories\views\default\input\category.php * @uses $vars['presentation'] * @uses $vars['perspective'] * @uses $vars['parent_cid'] * @uses $vars['category_class'] * @uses $vars['item_class'] */namespace hypeJunction\Categories;elgg_load_js('categories.tree.js');elgg_push_context('categories-input');$entity = elgg_extract('entity', $vars, false);$presentation = elgg_extract('presentation', $vars);$name = 'categories';if (isset($vars['name_override'])) {	$name = elgg_extract('name_override', $vars);}$root_name = elgg_extract('root_name_override', $vars, false);if (isset($vars['add_leaf'])) {	$add_leaf = elgg_extract('add_leaf', $vars, false);}$show_section_headers = elgg_extract('show_section_headers', $vars, true);$multiple = elgg_extract('multiple', $vars, HYPECATEGORIES_INPUT_MULTIPLE);$required = elgg_extract('required', $vars, true);$value = elgg_extract('value', $vars, false);if (elgg_instanceof($entity)) {	$value = get_entity_categories($entity->guid, array(), true);}$page_owner = elgg_get_page_owner_entity();if (!elgg_instanceof($page_owner, 'group') || !HYPECATEGORIES_GROUP_CATEGORIES) {	$page_owner = elgg_get_site_entity();}if ($required){    echo elgg_view('input/hidden', array(    	'name' => "{$name}",    	'value' => true,    	'required' => $required    ));}/**/echo '<!-- path: quebx\views\default\input\category.php -->';echo elgg_format_element('div',                         ['class'=>'categories-input'],                          elgg_view_menu('categories', ['entity'      => $page_owner,                                                    	'sort_by'     => 'priority',                                                        'class'       => $vars['category_class'],                                                        'show_section_headers'=>$show_section_headers,                                                        'presentation'=> $vars['presentation'],                                                        'perspective' => $vars['perspective'],                                                        'parent_cid'  => $vars['parent_cid'],                                                        'item_class'  => $vars['item_class'],                                                        'input' => ['name'      => $name,                                                            		'value'     => $value,                                                            		'multiple'  => $multiple,                                                            		'root_name' => $root_name,                                                            	    'add_leaf'  => $add_leaf,                                                                    'presentation'=> $presentation,]]));elgg_pop_context();