<?php/** * Object summary * * Sample output * <ul class="elgg-menu elgg-menu-entity"><li>Public</li><li>Like this</li></ul> * <h3><a href="">Title</a></h3> * <p class="elgg-subtext">Posted 3 hours ago by George</p> * <p class="elgg-tags"><a href="">one</a>, <a href="">two</a></p> * <div class="elgg-content">Excerpt text</div> * * @uses $vars['entity']    ElggEntity * @uses $vars['title']     Title link (optional) false = no title, '' = default * @uses $vars['metadata']  HTML for entity menu and metadata (optional) * @uses $vars['subtitle']  HTML for the subtitle (optional) * @uses $vars['tags']      HTML for the tags (optional) * @uses $vars['content']   HTML for the entity content (optional) */$entity = $vars['entity'];$subtype = $entity->getSubtype();$item_guid = $entity->guid;if ($subtype == 'place'){    $entity_href = "places/view/$item_guid";  }if ($subtype == 'observation' ||    $subtype == 'effort' ||    $subtype == 'insight' ||    $subtype == 'issue' ||    $subtype == 'transfer' ||    $subtype == 'cause') {    	    $entity_href = "jot/view/$item_guid";  }if ($subtype == 'market' ||    $subtype == 'item' ){  	$entity_href = "market/view/$item_guid";  }$title_link = elgg_extract('title', $vars, '');if ($title_link === '') {	if (isset($entity->title)) {		$text = $entity->title;	} else {		$text = $entity->name;	}	$params = array(		'text' => $text,		'href' => $entity_href,		'is_trusted' => true,	);	$title_link = elgg_view('output/url', $params);}$metadata = elgg_extract('metadata', $vars, '');$subtitle = elgg_extract('subtitle', $vars, '');$content  = '<!-- View: mod\places\views\default\object\elements\summary.php -->';$content .= elgg_extract('content', $vars, '');$tags = $entity->gettags('tags');//echo implode(', ', $tags);//echo elgg_dump($tags);//$tags = elgg_extract('tags', $vars, '');if ($tags !== false) {	$tags = elgg_view('output/tags', array('tags' => $tags));//	$tags = elgg_view('output/tags', array('tags' => $entity->tags));}//echo 'URL: '.$entity->getURL();//echo '<br>subtype: '.$entity->getSubtype();//echo elgg_dump($entity);if ($metadata) {	echo $metadata;}if ($title_link) {	echo "<h3>$title_link</h3>";}echo "<div class=\"elgg-subtext\">$subtitle</div>";echo $tags;//echo elgg_view('object/summary/extend', $vars);if ($content) {	echo "<div class=\"elgg-content\">$content</div>";}